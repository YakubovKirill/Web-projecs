(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return e.children[0].children[0]}var i=function(){var e=document.createElement("div");e.id="win-label-wrap";var t=document.createElement("p");t.innerHTML="Congratulations",e.append(t),(t=document.createElement("p")).innerHTML="You won",e.append(t),t=document.createElement("p");var n=r(document.getElementById("counter"));return t.innerHTML="Steps: ".concat(n.innerHTML),e.append(t),t=document.createElement("p"),n=r(document.getElementById("timer")),t.innerHTML="Time: ".concat(n.innerHTML),e.append(t),(t=document.createElement("p")).innerHTML="",e.append(t),e},o=function(e){var t=document.createElement("audio");t.setAttribute("src",e),t.load(),t.play(),t=void 0},c="./src/audio/click.mp3",l=function t(){var r=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:110;n(this,t),a(this,"initField",(function(t){var n=t;n.innerHTML="",r.reset();var a=e(Array(r.matrixSize-1).keys()).map((function(e){return e}));a.forEach((function(e){var t=document.createElement("div");t.className="cell",t.style.fontSize=r.size<5?"20px":"12px",t.style.width="".concat(r.cellWidth,"px"),t.style.height="".concat(r.cellWidth,"px");var a=document.createElement("div"),l=e+1;a.className="cell-content",a.innerHTML=l;var d=e%r.size,p=(e-d)/r.size;t.style.top="".concat(p*r.cellWidth,"px"),t.style.left="".concat(d*r.cellWidth,"px"),r.cells.push({value:l,left:d,top:p,element:t}),a.addEventListener("click",(function(){if(r.moveCell(e)&&(o(c),r.isWin())){var t=document.getElementById("win-layout");t.innerHTML="",t.append(i()),t.style.display="flex"}})),t.append(a),n.append(t)})),r.cells.push(r.emptyCell),a=[]})),a(this,"moveCell",(function(e){var t=r.cells[e];if(Math.abs(t.left-r.emptyCell.left)+Math.abs(t.top-r.emptyCell.top)<=1){r.addCounter(),t.element.style.top="".concat(r.emptyCell.top*r.cellWidth,"px"),t.element.style.left="".concat(r.emptyCell.left*r.cellWidth,"px");var n=r.emptyCell.left,a=r.emptyCell.top;return r.emptyCell.left=t.left,r.emptyCell.top=t.top,t.left=n,t.top=a,!0}return!1})),a(this,"isWin",(function(){var e=!0;return r.cells.forEach((function(t){e&&(e=t.value===t.top*r.size+t.left+1)})),e})),a(this,"addCounter",(function(){r.stepCount+=1;var e=document.getElementById("counter");e.innerHTML="";var t=document.createElement("div");t.className="top-btn-wrap",t.innerHTML="<h3>".concat(r.stepCount,"<h3>"),e.append(t)})),a(this,"setCellWidth",(function(e){r.cellWidth=e})),a(this,"reset",(function(){r.cells=[],r.stepCount=0;var e=document.getElementById("counter");e.innerHTML="";var t=document.createElement("div");t.className="top-btn-wrap",t.innerHTML="<h3>".concat(r.stepCount,"<h3>"),e.append(t)})),a(this,"shuffle",(function(e){for(var t=function(e){var t=0,n=[];r.cells.forEach((function(e){Math.abs(e.left-r.emptyCell.left)+Math.abs(e.top-r.emptyCell.top)===1&&n.push(t),t+=1}));var a=n[Math.floor(Math.random()*n.length)];r.moveCell(a)},n=0;n<e;n+=1)t();r.stepCount=-1,r.addCounter()})),this.size=l,this.matrixSize=Math.pow(l,2),this.cellWidth=d;var p=l-1;this.emptyCell={value:this.matrixSize,top:p,left:p},this.cells=[],this.stepCount=0};function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"start",(function(){t.isActive||(t.inerval=setInterval(t.update,1e3),t.offset=Date.now(),t.isActive=!0)})),d(this,"pause",(function(){t.isActive&&(clearInterval(t.inerval),t.inerval=null,t.isActive=!1)})),d(this,"delta",(function(){var e=Date.now(),n=e-t.offset;return t.offset=e,n})),d(this,"update",(function(){t.currentTime+=t.delta(),t.printTimer(Math.floor(t.currentTime/1e3))})),d(this,"reset",(function(){t.isActive=!1,t.currentTime=0,t.inerval=0,t.offset=0;var e=document.getElementById("timer");e.innerHTML="";var n=document.createElement("div");n.className="top-btn-wrap",n.innerHTML="<h3>00 : 00</h3>",e.append(n)})),d(this,"printTimer",(function(e){var t=Math.floor(e/60),n=Math.floor(e%60),a=t<10?"0".concat(t):"".concat(t),r=n<10?"0".concat(n):"".concat(n),i=document.getElementById("timer");i.innerHTML="";var o=document.createElement("div");o.className="top-btn-wrap",o.innerHTML="<h3>".concat(a," : ").concat(r,"</h3>"),i.append(o)})),this.reset()},s=function(e){var t=document.createElement("div");return t.className="bottom-btn-wrap",t.innerHTML="<p>".concat(e,"</p>"),t},u=document.getElementsByTagName("body")[0],m=document.createElement("main"),v=document.createElement("div");v.className="content";var f=document.createElement("div");f.className="game-wrap";var h=document.createElement("img");h.src="./src/img/iphone.png",h.alt="iphone",f.append(h);var y=document.createElement("div");y.id="win-layout",f.append(y);var E=document.createElement("div");E.id="display";var M=document.createElement("div");M.id="top-bar";var w=document.createElement("p");w.innerHTML="A1 BY",M.append(w);var b=new Date,T=b.getHours()>9?"".concat(b.getHours()):"0".concat(b.getHours()),g=b.getMinutes()>9?"".concat(b.getMinutes()):"0".concat(b.getMinutes());(w=document.createElement("p")).innerHTML="".concat(T," : ").concat(g),M.append(w),(w=document.createElement("p")).innerHTML="".concat(Math.floor(100*Math.random()),"%"),M.append(w),E.append(M);var L=document.createElement("div");L.className="wide-btns-wrap wide-btns-wrap-top";var H=document.createElement("div");H.id="timer",L.append(H);var C=document.createElement("div");C.id="counter",L.append(C),E.append(L);var I=document.createElement("div");I.id="name-wrap",I.innerHTML="<h1>Gem Puzzle</h1>",E.append(I);var A=document.createElement("div");A.id="field",E.append(A);var B=document.createElement("div");B.className="wide-btns-wrap wide-btns-wrap-bottom";var z=document.createElement("div");z.id="field-size-select-btn",B.append(z);var N=document.createElement("div");N.id="new-game-btn",B.append(N);var x=document.createElement("div");x.id="play-pause-btn",B.append(x),E.append(B),f.append(E),v.append(f),m.append(v),u.append(m);var W=document.getElementById("field"),S=document.getElementById("win-layout"),k=document.getElementById("new-game-btn"),j=document.getElementById("play-pause-btn"),F=document.getElementById("field-size-select-btn"),G=!0,O=!1,D=244,P=4,Y=Math.floor(D/P),U=new l(P,Y);U.initField(W);var $=new p;W.style.pointerEvents="none",F.innerHTML="",F.append(s("".concat(P," * ").concat(P))),F.addEventListener("click",(function(){9===(P+=1)&&(P=3),F.innerHTML="",F.append(s("".concat(P," * ").concat(P)))})),k.innerHTML="",k.append(s("New")),k.style.pointerEvents="none",k.addEventListener("click",(function(){G=!0,O=!1,$=null,$=new p;var e=Math.floor(D/P);U=null,(U=new l(P,e)).initField(W);var t=O?"||":"Go";j.innerHTML="",j.append(s(t))})),j.innerHTML="",j.append(s("Go")),j.addEventListener("click",(function(){if(O=!O,G){var e=Math.floor(D/P);U=null,(U=new l(P,e)).initField(W),U.shuffle(function(e){return e>4?40*e:20*e}(P))}G=!1;var t=O?"||":"Go";j.innerHTML="",j.append(s(t)),O?($.start(),k.style.pointerEvents="none",W.style.pointerEvents="auto"):($.pause(),k.style.pointerEvents="auto",W.style.pointerEvents="none")})),S.addEventListener("click",(function(e){if("win-layout"===e.target.id){S.style.display="none",G=!0,O=!1,$.pause(),$=null,$=new p;var t=Math.floor(D/P);U=null,(U=new l(P,t)).initField(W);var n=O?"||":"Go";j.innerHTML="",j.append(s(n)),W.style.pointerEvents="none"}}))})();